<h1 class="display-6 fw-bold mb-4">Yard Position & Map</h1>

<div class="row">
    <div class="col-lg-4 mb-4">
        <div class="card content-card">
            <h5 class="fw-bold">Search Container</h5>
            <div class="input-group mb-3">
                <input type="text" class="form-control form-control-lg" placeholder="Container #">
                <button class="btn btn-outline-primary" type="button">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </button>
            </div>
            
            <hr class="my-3">
            
            <h5 class="fw-bold">Assign Position</h5>
            <p class="text-muted">For newly arrived containers.</p>
            <form>
                <div class="mb-2">
                    <label class="form-label">Container Number</label>
                    <input type="text" class="form-control" value="CMAU7654321" readonly>
                </div>
                <div class="mb-2">
                    <label class="form-label">Assign to Slot</label>
                    <input type="text" class="form-control" placeholder="e.g., A-3-1">
                </div>
                <button type="submit" class="btn btn-primary w-100 mt-2">Assign</button>
            </form>
        </div>
    </div>

    <div class="col-lg-8">
        <div class="card content-card">
            <h5 class="fw-bold">Yard Map (Row A)</h5>
            <p class="text-muted">Click a slot to view details or move a container.</p>
            
            <div class="row text-center">
                <div class="col border p-2 m-1 bg-light"><strong>Block 1</strong></div>
                <div class="col border p-2 m-1 bg-light"><strong>Block 2</strong></div>
                <div class="col border p-2 m-1 bg-light"><strong>Block 3</strong></div>
                <div class="col border p-2 m-1 bg-light"><strong>Block 4</strong></div>
            </div>
            <div class="row text-center">
                <div class="col border p-3 m-1" data-bs-toggle="modal" data-bs-target="#moveModal" data-container="" data-slot="A-1-1" style="cursor: pointer;">A-1-1</div>
                
                <div class="col border p-3 m-1 bg-success text-white" data-bs-toggle="modal" data-bs-target="#moveModal" data-container="MSCU123" data-slot="A-2-1" style="cursor: pointer;">A-2-1 <br> <small>MSCU123</small></div>
                
                <div class="col border p-3 m-1" data-bs-toggle="modal" data-bs-target="#moveModal" data-container="" data-slot="A-3-1" style="cursor: pointer;">A-3-1</div>

                <div class="col border p-3 m-1 bg-danger text-white" data-bs-toggle="modal" data-bs-target="#moveModal" data-container="HLXU456" data-slot="A-4-1" style="cursor: pointer;">A-4-1 <br> <small>HLXU456</small></div>
            </div>
            <div class="row text-center">
                <div class="col border p-3 m-1" data-bs-toggle="modal" data-bs-target="#moveModal" data-container="" data-slot="A-1-2" style="cursor: pointer;">A-1-2</div>
                <div class="col border p-3 m-1" data-bs-toggle="modal" data-bs-target="#moveModal" data-container="" data-slot="A-2-2" style="cursor: pointer;">A-2-2</div>
                <div class="col border p-3 m-1 bg-success text-white" data-bs-toggle="modal" data-bs-target="#moveModal" data-container="TRIU112" data-slot="A-3-2" style="cursor: pointer;">A-3-2 <br> <small>TRIU112</small></div>
                <div class="col border p-3 m-1" data-bs-toggle="modal" data-bs-target="#moveModal" data-container="" data-slot="A-4-2" style="cursor: pointer;">A-4-2</div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="moveModal" tabindex="-1" aria-labelledby="moveModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content rounded-4">
            <div class="modal-header">
                <h5 class="modal-title" id="moveModalLabel">Manage Slot</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h3 id="modalSlotTitle">Slot: A-2-1</h3>
                <h5 id="modalContainerTitle">Container: MSCU123</h5>

                <hr>
                
                <form>
                    <div class="mb-3">
                        <label for="newSlot" class="form-label fw-bold">Move to New Slot:</label>
                        <input type="text" class="form-control" id="newSlot" placeholder="e.g., B-5-2">
                    </div>
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="fa-solid fa-truck-arrow-right"></i> Move Container
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    (function() {
        const moveModal = document.getElementById('moveModal');
        if (moveModal) {
            moveModal.addEventListener('show.bs.modal', function (event) {
                // Button that triggered the modal
                const slot = event.relatedTarget;
                
                // Get data from the 'data-*' attributes
                const containerName = slot.getAttribute('data-container');
                const slotName = slot.getAttribute('data-slot');

                // Get the modal's title elements
                const modalSlotTitle = moveModal.querySelector('#modalSlotTitle');
                const modalContainerTitle = moveModal.querySelector('#modalContainerTitle');
                const moveForm = moveModal.querySelector('form');

                // Update the modal's content
                modalSlotTitle.textContent = 'Slot: ' + slotName;

                if (containerName) {
                    modalContainerTitle.textContent = 'Container: ' + containerName;
                    moveForm.style.display = 'block'; // Show the move form
                } else {
                    modalContainerTitle.textContent = 'This slot is empty.';
                    moveForm.style.display = 'none'; // Hide the move form
                }
            });
        }
    })();
</script>